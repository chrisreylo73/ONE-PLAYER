{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nconst useAuth = _ref => {\n  _s();\n  let {\n    code\n  } = _ref;\n  const [accessToken, setAccessToken] = useState();\n  const [refreshToken, setRefreshToken] = useState();\n  const [expiresIn, setExpiresIn] = useState();\n  useEffect(() => {\n    axios.post(\"http://localhost:3001/login\", {\n      code\n    }).then(response => {\n      setAccessToken(response.data.accessToken);\n      setRefreshToken(response.data.refreshToken);\n      setExpiresIn(61);\n      window.history.pushState({}, null, \"/\");\n    }).catch(() => {\n      window.location = \"/\";\n    });\n  }, [code]);\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return;\n    const timeout = setTimeout(() => {\n      axios.post(\"http://localhost:3001/refresh\", {\n        refreshToken\n      }).then(response => {\n        setAccessToken(response.data.accessToken);\n        setRefreshToken(response.data.expiresIn);\n      }).catch(() => {\n        window.location = \"/\";\n      });\n    }, (expiresIn - 60) * 1000);\n    return () => clearTimeout(timeout);\n  }, [refreshToken, expiresIn]);\n  return accessToken;\n};\n_s(useAuth, \"E9KOao32uIhQ/xJLaKV8nLvpvcw=\");\nexport default useAuth;","map":{"version":3,"names":["React","useEffect","useState","axios","useAuth","_ref","_s","code","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","post","then","response","data","window","history","pushState","catch","location","timeout","setTimeout","clearTimeout"],"sources":["C:/Users/chris/Desktop/TEMP SPOTIFY APP/frontend/src/useAuth.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst useAuth = ({ code }) => {\r\n\tconst [accessToken, setAccessToken] = useState();\r\n\tconst [refreshToken, setRefreshToken] = useState();\r\n\tconst [expiresIn, setExpiresIn] = useState();\r\n\r\n\tuseEffect(() => {\r\n\t\taxios\r\n\t\t\t.post(\"http://localhost:3001/login\", {\r\n\t\t\t\tcode,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tsetAccessToken(response.data.accessToken);\r\n\t\t\t\tsetRefreshToken(response.data.refreshToken);\r\n\t\t\t\tsetExpiresIn(61);\r\n\t\t\t\twindow.history.pushState({}, null, \"/\");\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\twindow.location = \"/\";\r\n\t\t\t});\r\n\t}, [code]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!refreshToken || !expiresIn) return;\r\n\t\tconst timeout = setTimeout(() => {\r\n\t\t\taxios\r\n\t\t\t\t.post(\"http://localhost:3001/refresh\", {\r\n\t\t\t\t\trefreshToken,\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tsetAccessToken(response.data.accessToken);\r\n\t\t\t\t\tsetRefreshToken(response.data.expiresIn);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\twindow.location = \"/\";\r\n\t\t\t\t});\r\n\t\t}, (expiresIn - 60) * 1000);\r\n\t\treturn () => clearTimeout(timeout);\r\n\t}, [refreshToken, expiresIn]);\r\n\treturn accessToken;\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,IAAA,IAAc;EAAAC,EAAA;EAAA,IAAb;IAAEC;EAAK,CAAC,GAAAF,IAAA;EACxB,MAAM,CAACG,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAC,CAAC;EAChD,MAAM,CAACQ,YAAY,EAAEC,eAAe,CAAC,GAAGT,QAAQ,CAAC,CAAC;EAClD,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACfE,KAAK,CACHW,IAAI,CAAC,6BAA6B,EAAE;MACpCP;IACD,CAAC,CAAC,CACDQ,IAAI,CAAEC,QAAQ,IAAK;MACnBP,cAAc,CAACO,QAAQ,CAACC,IAAI,CAACT,WAAW,CAAC;MACzCG,eAAe,CAACK,QAAQ,CAACC,IAAI,CAACP,YAAY,CAAC;MAC3CG,YAAY,CAAC,EAAE,CAAC;MAChBK,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC;IACxC,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACZH,MAAM,CAACI,QAAQ,GAAG,GAAG;IACtB,CAAC,CAAC;EACJ,CAAC,EAAE,CAACf,IAAI,CAAC,CAAC;EAEVN,SAAS,CAAC,MAAM;IACf,IAAI,CAACS,YAAY,IAAI,CAACE,SAAS,EAAE;IACjC,MAAMW,OAAO,GAAGC,UAAU,CAAC,MAAM;MAChCrB,KAAK,CACHW,IAAI,CAAC,+BAA+B,EAAE;QACtCJ;MACD,CAAC,CAAC,CACDK,IAAI,CAAEC,QAAQ,IAAK;QACnBP,cAAc,CAACO,QAAQ,CAACC,IAAI,CAACT,WAAW,CAAC;QACzCG,eAAe,CAACK,QAAQ,CAACC,IAAI,CAACL,SAAS,CAAC;MACzC,CAAC,CAAC,CACDS,KAAK,CAAC,MAAM;QACZH,MAAM,CAACI,QAAQ,GAAG,GAAG;MACtB,CAAC,CAAC;IACJ,CAAC,EAAE,CAACV,SAAS,GAAG,EAAE,IAAI,IAAI,CAAC;IAC3B,OAAO,MAAMa,YAAY,CAACF,OAAO,CAAC;EACnC,CAAC,EAAE,CAACb,YAAY,EAAEE,SAAS,CAAC,CAAC;EAC7B,OAAOJ,WAAW;AACnB,CAAC;AAACF,EAAA,CAvCIF,OAAO;AAyCb,eAAeA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}