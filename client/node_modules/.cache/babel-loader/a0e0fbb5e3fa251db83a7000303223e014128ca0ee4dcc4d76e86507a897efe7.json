{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chris\\\\Desktop\\\\spotify-clone-main\\\\client\\\\src\\\\components\\\\SpotifyPlayer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpotifyPlayer = ({\n  accessToken,\n  currentTrack\n}) => {\n  _s();\n  useEffect(() => {\n    // Load the Spotify SDK script dynamically\n    const script = document.createElement(\"script\");\n    script.src = \"https://sdk.scdn.co/spotify-player.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    // Initialize the Spotify SDK\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const player = new window.Spotify.Player({\n        name: \"React Spotify Player\",\n        getOAuthToken: callback => {\n          callback(accessToken);\n        }\n      });\n\n      // Error handling\n      player.addListener(\"initialization_error\", ({\n        message\n      }) => {\n        console.error(\"Failed to initialize Spotify player\", message);\n      });\n      player.addListener(\"authentication_error\", ({\n        message\n      }) => {\n        console.error(\"Failed to authenticate Spotify player\", message);\n      });\n      player.addListener(\"account_error\", ({\n        message\n      }) => {\n        console.error(\"Failed to validate Spotify account\", message);\n      });\n      player.addListener(\"playback_error\", ({\n        message\n      }) => {\n        console.error(\"Failed to perform playback\", message);\n      });\n\n      // Connect to the player\n      player.connect().then(success => {\n        if (success) {\n          console.log(\"Connected to Spotify player\");\n        }\n      });\n\n      // Play the current track\n      player.addListener(\"ready\", ({\n        device_id\n      }) => {\n        console.log(\"Spotify player is ready\");\n        const play = ({\n          spotify_uri,\n          playerInstance: {\n            _options: {\n              getOAuthToken,\n              id\n            }\n          }\n        }) => {\n          getOAuthToken(access_token => {\n            fetch(`https://api.spotify.com/v1/me/player/play?device_id=${id}`, {\n              method: \"PUT\",\n              body: JSON.stringify({\n                uris: [spotify_uri]\n              }),\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${access_token}`\n              }\n            });\n          });\n        };\n        play({\n          playerInstance: player,\n          spotify_uri: currentTrack.uri\n        });\n      });\n    };\n  }, [accessToken, currentTrack]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"spotify-player\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n_s(SpotifyPlayer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = SpotifyPlayer;\nexport default SpotifyPlayer;\nvar _c;\n$RefreshReg$(_c, \"SpotifyPlayer\");","map":{"version":3,"names":["React","useEffect","jsxDEV","_jsxDEV","SpotifyPlayer","accessToken","currentTrack","_s","script","document","createElement","src","async","body","appendChild","window","onSpotifyWebPlaybackSDKReady","player","Spotify","Player","name","getOAuthToken","callback","addListener","message","console","error","connect","then","success","log","device_id","play","spotify_uri","playerInstance","_options","id","access_token","fetch","method","JSON","stringify","uris","headers","Authorization","uri","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/chris/Desktop/spotify-clone-main/client/src/components/SpotifyPlayer.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\n\r\nconst SpotifyPlayer = ({ accessToken, currentTrack }) => {\r\n\tuseEffect(() => {\r\n\t\t// Load the Spotify SDK script dynamically\r\n\t\tconst script = document.createElement(\"script\");\r\n\t\tscript.src = \"https://sdk.scdn.co/spotify-player.js\";\r\n\t\tscript.async = true;\r\n\t\tdocument.body.appendChild(script);\r\n\r\n\t\t// Initialize the Spotify SDK\r\n\t\twindow.onSpotifyWebPlaybackSDKReady = () => {\r\n\t\t\tconst player = new window.Spotify.Player({\r\n\t\t\t\tname: \"React Spotify Player\",\r\n\t\t\t\tgetOAuthToken: (callback) => {\r\n\t\t\t\t\tcallback(accessToken);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\t// Error handling\r\n\t\t\tplayer.addListener(\"initialization_error\", ({ message }) => {\r\n\t\t\t\tconsole.error(\"Failed to initialize Spotify player\", message);\r\n\t\t\t});\r\n\t\t\tplayer.addListener(\"authentication_error\", ({ message }) => {\r\n\t\t\t\tconsole.error(\"Failed to authenticate Spotify player\", message);\r\n\t\t\t});\r\n\t\t\tplayer.addListener(\"account_error\", ({ message }) => {\r\n\t\t\t\tconsole.error(\"Failed to validate Spotify account\", message);\r\n\t\t\t});\r\n\t\t\tplayer.addListener(\"playback_error\", ({ message }) => {\r\n\t\t\t\tconsole.error(\"Failed to perform playback\", message);\r\n\t\t\t});\r\n\r\n\t\t\t// Connect to the player\r\n\t\t\tplayer.connect().then((success) => {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tconsole.log(\"Connected to Spotify player\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Play the current track\r\n\t\t\tplayer.addListener(\"ready\", ({ device_id }) => {\r\n\t\t\t\tconsole.log(\"Spotify player is ready\");\r\n\t\t\t\tconst play = ({\r\n\t\t\t\t\tspotify_uri,\r\n\t\t\t\t\tplayerInstance: {\r\n\t\t\t\t\t\t_options: { getOAuthToken, id },\r\n\t\t\t\t\t},\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tgetOAuthToken((access_token) => {\r\n\t\t\t\t\t\tfetch(`https://api.spotify.com/v1/me/player/play?device_id=${id}`, {\r\n\t\t\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\t\t\tbody: JSON.stringify({ uris: [spotify_uri] }),\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${access_token}`,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tplay({\r\n\t\t\t\t\tplayerInstance: player,\r\n\t\t\t\t\tspotify_uri: currentTrack.uri,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\t}, [accessToken, currentTrack]);\r\n\r\n\treturn <div id=\"spotify-player\"></div>;\r\n};\r\n\r\nexport default SpotifyPlayer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}