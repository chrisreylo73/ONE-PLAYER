{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chris\\\\Desktop\\\\Spotify-Weather\\\\client\\\\src\\\\components\\\\YoutubeAuth.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst YouTubeAuth = ({\n  clientId,\n  clientSecret\n}) => {\n  _s();\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [playlists, setPlaylists] = useState([]);\n  const authenticate = () => {\n    // Redirect to Google's OAuth2 consent screen\n    const authUrl = `https://accounts.google.com/o/oauth2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(window.location.origin + \"/callback\")}&response_type=code&scope=https://www.googleapis.com/auth/youtube.readonly`;\n    window.location.href = authUrl;\n  };\n  const getPlaylists = async accessToken => {\n    try {\n      const response = await fetch(\"https://www.googleapis.com/youtube/v3/playlists\", {\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setPlaylists(data.items);\n      } else {\n        console.error(\"Failed to fetch playlists:\", response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  };\n  useEffect(() => {\n    // Get the access token from the URL after successful authentication\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n    if (code) {\n      // Exchange the code for an access token\n      const formData = new URLSearchParams();\n      formData.append(\"client_id\", clientId);\n      formData.append(\"client_secret\", clientSecret);\n      formData.append(\"code\", code);\n      formData.append(\"redirect_uri\", window.location.origin + \"/callback\");\n      formData.append(\"grant_type\", \"authorization_code\");\n      fetch(\"https://accounts.google.com/o/oauth2/token\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: formData\n      }).then(response => response.json()).then(data => {\n        if (data.access_token) {\n          setIsSignedIn(true);\n          getPlaylists(data.access_token);\n        }\n      }).catch(error => console.error(\"Error exchanging code for access token:\", error));\n    }\n  }, [clientId, clientSecret]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: authenticate,\n      children: \"Sign In with YouTube\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Playlists:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: playlists.map(playlist => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: playlist.snippet.title\n        }, playlist.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 8\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 3\n  }, this);\n};\n_s(YouTubeAuth, \"9zJQSfioSpRTDbuaTEbTDQad2fo=\");\n_c = YouTubeAuth;\nexport default YouTubeAuth;\nvar _c;\n$RefreshReg$(_c, \"YouTubeAuth\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","YouTubeAuth","clientId","clientSecret","_s","isSignedIn","setIsSignedIn","playlists","setPlaylists","authenticate","authUrl","encodeURIComponent","window","location","origin","href","getPlaylists","accessToken","response","fetch","headers","Authorization","ok","data","json","items","console","error","status","statusText","urlParams","URLSearchParams","search","code","get","formData","append","method","body","then","access_token","catch","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","playlist","snippet","title","id","_c","$RefreshReg$"],"sources":["C:/Users/chris/Desktop/Spotify-Weather/client/src/components/YoutubeAuth.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst YouTubeAuth = ({ clientId, clientSecret }) => {\r\n\tconst [isSignedIn, setIsSignedIn] = useState(false);\r\n\tconst [playlists, setPlaylists] = useState([]);\r\n\r\n\tconst authenticate = () => {\r\n\t\t// Redirect to Google's OAuth2 consent screen\r\n\t\tconst authUrl = `https://accounts.google.com/o/oauth2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(window.location.origin + \"/callback\")}&response_type=code&scope=https://www.googleapis.com/auth/youtube.readonly`;\r\n\r\n\t\twindow.location.href = authUrl;\r\n\t};\r\n\r\n\tconst getPlaylists = async (accessToken) => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\"https://www.googleapis.com/youtube/v3/playlists\", {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${accessToken}`,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (response.ok) {\r\n\t\t\t\tconst data = await response.json();\r\n\t\t\t\tsetPlaylists(data.items);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\"Failed to fetch playlists:\", response.status, response.statusText);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error fetching data:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t// Get the access token from the URL after successful authentication\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\t\tconst code = urlParams.get(\"code\");\r\n\r\n\t\tif (code) {\r\n\t\t\t// Exchange the code for an access token\r\n\t\t\tconst formData = new URLSearchParams();\r\n\t\t\tformData.append(\"client_id\", clientId);\r\n\t\t\tformData.append(\"client_secret\", clientSecret);\r\n\t\t\tformData.append(\"code\", code);\r\n\t\t\tformData.append(\"redirect_uri\", window.location.origin + \"/callback\");\r\n\t\t\tformData.append(\"grant_type\", \"authorization_code\");\r\n\r\n\t\t\tfetch(\"https://accounts.google.com/o/oauth2/token\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: formData,\r\n\t\t\t})\r\n\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\tif (data.access_token) {\r\n\t\t\t\t\t\tsetIsSignedIn(true);\r\n\t\t\t\t\t\tgetPlaylists(data.access_token);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => console.error(\"Error exchanging code for access token:\", error));\r\n\t\t}\r\n\t}, [clientId, clientSecret]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{!isSignedIn ? (\r\n\t\t\t\t<button onClick={authenticate}>Sign In with YouTube</button>\r\n\t\t\t) : (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>My Playlists:</h2>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{playlists.map((playlist) => (\r\n\t\t\t\t\t\t\t<li key={playlist.id}>{playlist.snippet.title}</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default YouTubeAuth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}